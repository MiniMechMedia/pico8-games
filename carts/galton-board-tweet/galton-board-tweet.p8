pico-8 cartridge // http://www.pico-8.com
version 39
__lua__
--galton board tweet             v0.1.0
--mini mech media

-- The main idea is that we simulate a bunch of falling particles
-- which may get jostled on the way down. When a particle hits
-- the bottom of the screen, record that event by incrementing
-- the memory location equal to the x coordinate where the
-- particle landed. Simply draw a histogram where each bin height
-- is the number of hits at that x coordinate.

-- List of particles
p={}--[[
-- Our index variable
]]i=0--[[
]]k=128--[[
]]f=fillp--[[
]]::_::--[[
-- We're doing an inline "for i=0,127 do" loop. So
-- we manually reset i and call the functions we need
]]if(i==k)--[[then
  ]]flip()cls()i=0--[[
end]]
-- Draw one line of the peg board 
f(â–‘)--[[
]]line(i,9,i,70,5)--[[
]]f()--[[
-- draw the ith bar of the histogram
]]line(i,k,i,k-@i,15)
-- Initialize the list with particle objects
p[i]=p[i]or{--[[
  -- Initialize position and velociy.
  -- Position is initialized offscreen, and particle will
  -- fall like normal. When it reaches bottom of screen,
  -- let the regular particle recycling code respawn
  -- the particle in the right location. Particles will
  -- hit the bottom of the screen at different times, so
  -- the particles trickle in onscreen even though they
  -- are all instantiated at the same time
  ]]x=-k,y=0,vx_=0,vy_w=0,--[[
  -- We will be losing access to the rnd function in the next
  -- line, so stash it. Similarly, need to stash _ENV since
  -- we will be overwriting it soon
  ]]r=rnd,old_env_=_ENV}
-- _ENV sets the global lookup table. From here on
-- out any references like x or y behave like we are
-- doing p[i].x or p[i].y
_ENV=p[i]--[[
]]pset(x,y,15)--[[
-- This random value will be used for a variety of purposes later on
]]g=r(8)--[[
-- apply acceleration (gravity)
]]vy_w+=.1--[[
-- apply velocity
]]x+=vx_
y+=vy_w
-- If particle has hit the bottom of the screen...
if(y>128)--[[then
  -- increment the xth bin in the histogram
  ]]poke(x,@x+1)--[[
  -- reset the particle back to the top of the board
  -- in a semi-random position, and 0 out velocity
  ]]x,y,vx_,vy_w=60+g,g/5,0,0--[[
end]]
-- If we are in the peg section of the screen
-- then with a 25% chance (g<2), simulate a collision
if(y>9and y<70and g<2)--[[then
  -- Point the particle's velocity in a random direction.
  -- We don't have enough characters left to calculate speed
  -- so we don't preserve energy. Luckily this still looks
  -- convincing.
  -- Note that Uniform(0,8) conditioned on g < 2, means
  -- g ~ Uniform(0,2). So feeding that value to cos and sin
  -- corresponds to a random angle between 0 and 720 degrees
  -- which is equivalent to a random angle between 0 and 360 degrees
  ]]vx_=cos(g)/2--[[
  ]]vy_w=sin(g)/2--[[
end]]
-- Reset global lookup table so we can access p, i, etc. again
_ENV=old_env_
i+=1goto _
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000ff0000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000f0000f00000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000f000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000f0000000000000000000000000000000000000000000000000000000000000000
005000500050005000500050005000500050005000500050005000500050f05000f0005000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000500050f050005000500050005000500050005000500050005000500050005000500050
5000500050005000500050005000500050005000500050005000500050005f0f5000500050005000500050005000500050005000500050005000500050005000
005000500050005000500050005000500050005000500050005000500050005f0050005000500050005000500050005000500050005000500050005000500050
500050005000500050005000500050005000500050005000500050005000500f50f0500050005000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005f005000f00f50005000500050005000500050005000500050005000500050005000500050
500050005000500050005000500050005000500050005000500050005000500050f0500050005000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000500050ff50005000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000500050f050005000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050f05000500050005000500050005000500050005000500050005000500050005000
00500050005000500050005000500050005000500050005000500050005000500050f05000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000500f500050005000500050005000500050005000500050005000500050005000500050
500050005000500050005000500050005000500050005000500050005000500050f0500f50005000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000f0005ff050005000500050005000500050005000500050005000500050005000500050
5000500050005000500050005000500050005000500050005000500050005000f000f00f50005000500050005000500050005000500050005000500050005000
00500050005000500050005000500050005000500050005000500050005f00500050f05000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000
005000500050005000500050005000500050005000500050005000500f50f05000500f50f0500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500f50005000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000500050005000f000500050005000500050005000500050005000500050005000500050
500050005000500050005000500050005000500050005000500050005000500f5000500f50005000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000f000500050005000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000
00500050005000500050005000500050005000500050005000500050005000500050f05000500050005000500050005000500050005000500050005000500050
5000500050005000500050005000500050005000500050005000500050005f005000500f500f5000500050005000500050005000500050005000500050005000
00500050005000500050005000500050005000500050005000500050f0500050005000500050f050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500050f05000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000f0005f00500050f0500050005000500050005000500050005000500050005000500050
500050005000500050005000500050005000500050005000500050005f00500f5f00500050005000500050005000500050005000500050005000500050005000
00500050005000500050005000500050005000500050005000500050005f005000500f5000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000
005000500050005000500050005000500050005000500050005000500f5f00500050005000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500f5000500050005f005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000500050f05000500f500050005000500050005000500050005000500050005000500050
500050005000500050005000500050005000500050005000500f500050005000500050005f005000500050005000500050005000500050005000500050005000
00500050005000500050005000500050005000500050005000500050005000500f50005000500050005000500050005000500050005000500050005000500050
5000500050005000500050005000500050005000500050005000500050f050005000f00050005000500050005000500050005000500050005000500050005000
005000500050005000500050005000500050005000500050005000500050005000500050ff500050005000500050005000500050005000500050005000500050
500050005000500050005000500050005000500050005000500050005f00500050005000500050005000500f5000500050005000500050005000500050005000
00500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000
005000500050005000500050005000500050005000500050005000500050005000500050005f0050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005f0050005f005000500050005000500050005000500050005000500050005000500050005000
005000500050005000500050005000500050005f0050005000500050005000500050005000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000
00500050005000500050005000500050005000500050005000500f50005000500050005000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005f00500050005000500050005000500050005000500050005000500050005000500050005000
00500050005000500050005000500050005000500050005000f0f050005000500050005000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000500050005000500050f050005000500050005000500050005000500050005000500050
5000500050005000500050005000f000500050005000f0005000500050005000500f500050005000500050005000500050005000500050005000500050005000
00500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050005000500050
500050005000500050005000500050005000500050005000500050005f0050005000500f5000500f500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050f0500050005000500f5000500050005000500050005000500050005000500050005000500050
500050005000500050005000500050005000500050005000500050005000500050005f0050005000500050005000500050005000500050005000500050005000
005000500050005000500050005000500050005000500050005000500050f0500050005000500050005000500050005000500050005000500050005000500050
50005000500050005000500050005000500050005000500050005000500050005000500f50005000500050005000500050005000500050005000500050005000
0050005000500050005000500050005000500050005000500050005000500050f050005000500050005000500050005000500050005000500050005000500050
5000500050005000500050005000500050005000500050005000500050005000500050005000500050f050005000500050005000500050005000500050005000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000f000f000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000f000000f00000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000f000f000000000ff00000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000f000000000000000f0f0f00000ff00000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000f000000000f0f0f000f0ff00000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000ff00f0f0f000f0ff00000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000f00000000000ff00f0f0f000f0ff00000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000ff00f0f0f000f0ff00ff0000f00000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000f00ff00f0f0f000f0ff00ff0000f00000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000f0000f000f0ffff0f0fff000f0ff00ff0000f00000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000f0000f000f0fff00fffff00ff0ff00ff0000f00000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000f0000ff00f0fff00f0fff0ffffff00ff0000ff0000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000f000fff00f0fff00fffff0ffffff00fff000ff0000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000f000fff00fffff0ffffff0ffffff00fff000ff0000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000f000fff0ffffff0ffffff0ffffff0ffff000ff0000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000ff00fff0ffffff0ffffff0ffffff00fff000ff0000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000ff0fffffffffff0ffffff0ffffff00ffff00ff0000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000ff0ffffffffffffffffffffffffff0ffff0fff0000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000fff0fffffffffffffffffffffffffffffff0fff0000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000fff0fffffffffffffffffffffffffffffff0fff0000000000000000000000000000000000000000000
00000000000000000000000000000000000000f00000f0fff0fffffffffffffffffffffffffffffff0fff0000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000f0fffffffffffffffffffffffffffffffffff0fff0f00000000000000000000000000000000000000000
00000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffff0fff0f00000000000000000000000000000000000000000
00000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffff0fff0f00000f00000000000000000000000000000000000
00000000000000000000000000000000000000000f00fffffffffffffffffffffffffffffffffffff0fff0ff0000f00000000000000000000000000000000000
00000000000000000000000000000000000000000f00fffffffffffffffffffffffffffffffffffff0fff0ff0f00f00000000000000000000000000000000000
00000000000000000000000000000000000000f00f00fffffffffffffffffffffffffffffffffffffffff0ff0000f00000000000000000000000000000000000
000000000000000000000000000000000000f0f0ff0fffffffffffffffffffffffffffffffffffffffffffff0000f00000000000000000000000000000000000
000000000000000000000000000000000000f0f0ff0ffffffffffffffffffffffffffffffffffffffffffffff0f0f00000000000000000000000000000000000
000000000000000000000000000000000000f0f0ff0ffffffffffffffffffffffffffffffffffffffffffffffff0f00000000000000000000000000000000000
000000000000000000000000000000000ff0f0f0ff0ffffffffffffffffffffffffffffffffffffffffffffffff0f00000000000000000000000000000000000
000000000000000000000000000000000ff0fff0fffffffffffffffffffffffffffffffffffffffffffffffffff0ff0000000000000000000000000000000000
000000000000000000000000000000000ff0ffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00f0000000000000000000000000000000
000000000000000000000000000000000ff0fffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0ff000000000000000000000000000000
0000000000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000000000000000000000000
000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000f000000000000000000000000
00000000000000000000000f0000f0ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000f000000000000000000000000
00000000000000000000000f0000f0ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff000f00f000000000000000000000
0000000000000000ff00ff0f0ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0f0f0000000000000000000

__meta:cart_info_start__
cart_type: tweet
# Embed: 750 x 680
game_name: Galton Board Tweet
# Leave blank to use game-name
game_slug: ''
jam_info: []
tagline: Falling sand Galton Board tweetcart
time_left: ''
develop_time: ''
description: |
  [Seven-segment display](https://en.wikipedia.org/wiki/Seven-segment_display) tweetcart
controls: []
hints: ''
acknowledgements: ''
to_do: []
version: 0.1.0
img_alt: Pixel rendering of sand falling down pegs and accumulating in the shape of a normal curve
about_extra: ''
pico_url: https://pico-8-edu.com/?c=AHB4YQEzAQjrwVscdtN5h93ngdeYMEN1553n3XjmheWFUZoGVx83EN3eXHR9ctNRp50eFd35wRPcF9xdBFF1VHJSfGJ9Vtd2bVlNVK8QRToBI2HzKFFWvsH9WXPdlUVSXDmUHJnGoWU3LBEMX5qGI2W5sHF4d-qWSR7hGRbfIuoH_seIRpq38MBj_CCtiqlXyOpq84Dp45d3XCIVNDo6_RaDO-mKgMjGsQPXLr5Ds5OOT8ZlNjVRR1Ed6RJER2sVhBtLayNKAat1PBEKhuSyAjfvVSMzxcW7TVUUSmHTz7C5eevM-nrok7g5YWFhbH1pc7DsRsq9shufcJL8WDrYDGVTcTZarCwD&g=w-w-w-w1HQHw-w2Xw-w3Xw-w2HQH
number_players: [0]
__meta:cart_info_end__
